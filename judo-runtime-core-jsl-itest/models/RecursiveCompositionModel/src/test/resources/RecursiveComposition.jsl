model RecursiveComposition;

type string String min-size:0 max-size:128;

entity EntityX {
    field String name;
    field EntityX x;
    field EntityX[] xs;
    field EntityY y;
    field EntityY[] ys;
}

entity EntityY {
    field String name;
    field EntityX yx;
    field EntityX[] yxs;
}

transfer EntityXTO (EntityX entityX) {
    field String name <=> entityX.name;
    @Embedded
    relation EntityXTO x <=> entityX.x;
    @Embedded
    relation EntityXTO[] xs <=> entityX.xs;
    @Embedded
    relation EntityYTO y <=> entityX.y;
    @Embedded
    relation EntityYTO[] ys <=> entityX.ys;
}

transfer EntityYTO (EntityY entityY) {
    field String name <=> entityY.name;
    @Embedded
    relation EntityXTO yx <=> entityY.yx;
    @Embedded
    relation EntityXTO[] yxs <=> entityY.yxs;
}
