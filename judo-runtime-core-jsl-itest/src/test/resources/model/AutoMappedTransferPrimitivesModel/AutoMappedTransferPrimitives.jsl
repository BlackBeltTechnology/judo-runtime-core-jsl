model AutoMappedTransferPrimitives;

import judo::types;

type numeric Scaled(precision = 9, scale = 2);
type string PhoneNumber(min-size = 0, max-size = 32, regex = "^(\\+\\d{1,2}\\s)?\\(?\\d{2,3}\\)?[\\s.-]\\d{3}[\\s.-]\\d{4}$");

enum MyEnum {
    Atomic = 0;
    Bombastic = 1;
    Crazy = 2;
}

//Contains all types of primitive fields
entity abstract AbstractEntityFields {
    field Boolean boolAttr;
    field Integer integerAttr;
    field PhoneNumber regexAttr;
    field Scaled scaledAttr;
    field Date dateAttr;
    field Time timeAttr;
    field Timestamp timestampAttr;
    field MyEnum enumAttr;
    field String stringAttr;
}

entity abstract AbstractEntityRequiredFields {
    field required Boolean boolAttr;
    field required Integer integerAttr;
    field required PhoneNumber regexAttr;
    field required Scaled scaledAttr;
    field required Date dateAttr;
    field required Time timeAttr;
    field required Timestamp timestampAttr;
    field required MyEnum enumAttr;
    field required String stringAttr;
}

entity EntityWithOptionalPrimitives extends AbstractEntityFields {
}

entity EntityWithRequiredPrimitives  extends AbstractEntityRequiredFields {
}

transfer AutoMappedTransferOnOptionalPrimitives (EntityWithOptionalPrimitives mappedEntity);

transfer AutoMappedTransferOnRequiredPrimitives (EntityWithRequiredPrimitives mappedEntity);

entity EntityWithOptionalIdentifiers {
    identifier Integer integerAttr;
    identifier Scaled scaledAttr;
    identifier String stringAttr;
    identifier PhoneNumber regexAttr;
    identifier Boolean boolAttr;
    identifier Date dateAttr;
    identifier Timestamp timestampAttr;
    identifier MyEnum enumAttr;
}

transfer AutoMappedTransferOnOptionalIdentifiers (EntityWithOptionalIdentifiers mappedEntity);

entity EntityWithOptionalPrimitiveDefaults {
    field Integer integerAttr = 1;
    field Scaled scaledAttr = 2.34;
    field String stringAttr = "test";
    field PhoneNumber regexAttr = "+36 (30) 123 1234";
    field Boolean boolAttr = true;
    field Date dateAttr = `2022-07-11`;
    field Timestamp timestampAttr = `2022-07-11T19:09:33Z`;
    field Time timeAttr = `23:59:59`;
    field Time shortTimeAttr = `23:59`;
    field MyEnum enumAttr = MyEnum#Bombastic;
}

transfer AutoMappedTransferOnOptionalPrimitiveDefaults (EntityWithOptionalPrimitiveDefaults mappedEntity);

entity EntityWithRequiredPrimitiveDefaults {
    field required Integer integerAttr = 1;
    field required Scaled scaledAttr = 2.34;
    field required String stringAttr = "test";
    field required PhoneNumber regexAttr = "+36 (30) 123 1234";
    field required Boolean boolAttr = true;
    field required Date dateAttr = `2022-07-11`;
    field required Timestamp timestampAttr = `2022-07-11T19:09:33Z`;
    field required Time timeAttr = `23:59:59`;
    field required MyEnum enumAttr = MyEnum#Bombastic;
}

transfer AutoMappedTransferOnRequiredPrimitiveDefaults (EntityWithRequiredPrimitiveDefaults mappedEntity);

entity EntityWithIdentifiersContainer {
    field EntityWithOptionalIdentifiers[] entitiesWithIdentifiers;
}

transfer AutoMappedTransferOnOptionalIdentifiersContainer (EntityWithIdentifiersContainer mappedEntity);
