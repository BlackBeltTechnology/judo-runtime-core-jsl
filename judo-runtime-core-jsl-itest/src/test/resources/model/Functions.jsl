model Functions

type numeric Integer(precision = 9, scale = 0)
type numeric Scaled(precision = 9, scale = 2)
type string String(max-length = 128)
type string PhoneNumber(max-length = 32, regex = "^(\\+\\d{1,2}\\s)?\\(?\\d{3}\\)?[\\s.-]\\d{3}[\\s.-]\\d{4}$")   // escape sequencing does not work in regexp!!!!
type boolean Boolean
type date Date
type timestamp Timestamp
type time Time
type binary Binary

entity Entity {
    field Integer integerAttr
    field Scaled scaledAttr
    field String stringAttr
    field PhoneNumber regexAttr
    field Boolean boolAttr
    field Date dateAttr
    field Timestamp timestampAttr
}

entity EntityWithPrimitiveDefaults {
    field Integer integerAttr = 1
    field Scaled scaledAttr = 2.34
    field String stringAttr = "test"
    field PhoneNumber regexAttr = "+36-1-123-123"
    field Boolean boolAttr = true
    field Date dateAttr = `2022-07-11`
    field Timestamp timestampAttr = `2022-07-11T19:09:33Z`
    field Time timeAttr = `23:59:59`
}
/* FIXME: JNG-3896
entity Functions {
    field Entity entity
    field EntityWithPrimitiveDefaults entityWithPrimitives
}

FIXME: use "extends Functions" once bug is fixed */
entity AnyTypeFunctions {
    field Entity entity
    field EntityWithPrimitiveDefaults entityWithPrimitives

    derived Boolean stringIsDefinedFalse => self.entity.stringAttr!isDefined()
    derived Boolean stringIsDefinedTrue => self.entityWithPrimitives.stringAttr!isDefined()
    derived Boolean stringIsUnDefinedTrue => self.entity.stringAttr!isDefined()
    derived Boolean stringIsUnDefinedFalse => self.entityWithPrimitives.stringAttr!isDefined()
}
